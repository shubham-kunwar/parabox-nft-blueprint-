import"./modulepreload-polyfill.c7c6310f.js";import{S as Q,a as se,w as E,c as S,s as de,d as k}from"./Subject.c67f7ae3.js";import{p as ie,c as L,t as G,w as z,C as ce}from"./connector-client.74f05fda.js";import{l as g}from"./logger.8aad6c34.js";import{R as x,a as y,b as M,e as _,o as b}from"./index.es.095da3c8.js";import{R as ue,f as N,d as pe}from"./first.9e6ac58d.js";import{c as H,o as V,s as K,t as le}from"./switchMap.deec5196.js";import{g as me}from"./schemas.bc1c5361.js";import{M as fe}from"./message-client.0e26c204.js";import"./blake2b.e5109153.js";import"./send-message.6e0479e0.js";const w={pending:"pending",processing:"processing",completed:"completed",failed:"failed"},A={addJob:"addJob",removeJob:"removeJob",updateJobStatus:"updateJobStatus",retryJob:"retryJob",cancelJob:"cancelJob"},D={UnknownInteractionError:"UnknownInteractionError",SaveStateError:"SaveStateError",GetStateError:"GetStateError",AddJobToQueueError:"AddJobToQueueError",UpdateJobStatusError:"UpdateJobStatusError",JobAlreadyExistsError:"JobAlreadyExistsError",JobNotFoundError:"JobNotFoundError",FailedToCancelJobError:"FailedToCancelJobError"},be=()=>({paused:new ue(1),queueInteraction:new Q,queueInteractionResult:new Q,processNextJob:new Q}),Ie=()=>{const n=new Map,r=s=>new Promise((a,m)=>{try{const u=n.get(s);a(u!=null?u:void 0)}catch(u){m(u)}}),l=(s,a)=>new Promise((m,u)=>{try{n.set(s,JSON.stringify(a)),m(void 0)}catch(d){u(d)}});return{getData:s=>x.fromPromise(r(s),a=>a).andThen(a=>a?ie(a):y(void 0)),setData:(s,a)=>x.fromPromise(l(s,a),m=>m)}},P=({storage:n=Ie(),key:r,worker:l,logger:s,subjects:a=be(),paused:m=!1})=>{a.paused.next(m);const u=new se,d=e=>y({items:new Map(Object.entries(e.items)),ids:{[w.pending]:new Set(e.ids.pending),[w.processing]:new Set(e.ids.processing),[w.completed]:new Set(e.ids.completed),[w.failed]:new Set(e.ids.failed)}}),p=e=>y({items:[...e.items.entries()].reduce((t,[c,f])=>({...t,[c]:f}),{}),ids:{[w.pending]:[...e.ids.pending.values()],[w.processing]:[...e.ids.processing.values()],[w.completed]:[...e.ids.completed.values()],[w.failed]:[...e.ids.failed.values()]}}),i={items:{},ids:{pending:[],processing:[],completed:[],failed:[]}},o=()=>n.getData(r).map(e=>e!=null?e:i).andThen(d).mapErr(()=>({reason:"GetStateError"})),T=e=>p(e).asyncAndThen(t=>(s==null||s.trace(`[${r}] saveState`,t.ids),n.setData(r,t))).mapErr(()=>({reason:"SaveStateError"})),I=(e,t)=>(s==null||s.debug(`[${r}] addJob`,{job:e}),t.items.set(e.id,{...e,updatedAt:Date.now()}),t.ids.pending.add(e.id),b(t)),v=({job:e,status:t,state:c,numberOfRetries:f})=>{const F=e.id;s==null||s.debug(`[${r}] updateJobStatus`,{jobId:e.id,fromStatus:e.status,toStatus:t});const B={...e,updatedAt:Date.now(),status:t};return f&&(B.numberOfRetries=f),c.items.set(F,B),c.ids[e.status].delete(F),c.ids[t].add(F),b(c)},X=(e,t)=>(s==null||s.debug(`[${r}] removeJob`,{jobId:e}),t.items.delete(e),t.ids.pending.delete(e),t.ids.completed.delete(e),t.ids.failed.delete(e),t.ids.processing.delete(e),b(t)),Y=e=>t=>{switch(e.interaction){case A.addJob:return I(e.job,t);case A.removeJob:return X(e.jobId,t);case A.updateJobStatus:return C(e.jobId).andThen(c=>v({...e,state:t,job:c}));case A.retryJob:return C(e.jobId).andThen(c=>v({...e,state:t,job:c,status:"pending",numberOfRetries:c.numberOfRetries+1}));case A.cancelJob:return C(e.jobId).andThen(c=>c.status==="pending"?v({job:{...c,canceled:!0},state:t,status:"completed"}):M({reason:D.FailedToCancelJobError}))}},Z=e=>o().map(t=>t.items.has(e)),j=(e,t)=>Z(t).andThen(c=>c?M({reason:D.JobAlreadyExistsError}):R({interaction:"addJob",job:{id:t,data:e,status:w.pending,numberOfRetries:0,createdAt:Date.now(),updatedAt:Date.now(),canceled:!1},jobId:t,interactionId:crypto.randomUUID()}).mapErr(f=>f.error)),R=e=>{const t=a.queueInteractionResult.pipe(N(f=>f.isErr()?f.error.interaction.interactionId===e.interactionId:f.value.interactionId===e.interactionId)),c=V(!0).pipe(G(()=>{a.queueInteraction.next(e)}),N(f=>!1));return x.fromPromise(pe(H(t,c)),f=>f).andThen(f=>f)},C=e=>o().map(t=>t.items.get(e)).andThen(t=>t?y(t):_({reason:D.JobNotFoundError}));u.add(a.queueInteraction.pipe(L(e=>o().andThen(Y(e)).andThen(T).map(()=>e).mapErr(t=>({error:t,interaction:e}))),G(e=>a.queueInteractionResult.next(e))).subscribe());const ee=()=>o().andThen(e=>{const t=e.ids.pending.values().next().value;return t?y(t):_({reason:D.JobNotFoundError})}).andThen(C),U=(e,t)=>{const c=crypto.randomUUID();return R({interaction:"updateJobStatus",jobId:e,status:t,interactionId:c})},te=e=>{const t=crypto.randomUUID();return R({interaction:"retryJob",jobId:e,interactionId:t})},ne=e=>R({jobId:e,interaction:"removeJob",interactionId:crypto.randomUUID()}),re=e=>U(e.id,"processing").andThen(()=>l.run(e).mapErr(({shouldRetry:t})=>t?te(e.id):U(e.id,"failed"))).andThen(()=>U(e.id,"completed")).map(()=>{a.processNextJob.next()}).mapErr(()=>{a.processNextJob.next()}),oe=a.queueInteractionResult.pipe(N(e=>e.isOk())),ae=a.paused.pipe(N(e=>!e));return u.add(H(oe,a.paused,a.processNextJob).pipe(L(()=>V(!0).pipe(z(ae),K(()=>ee().andThen(re))))).subscribe()),{add:j,start:()=>{a.paused.next(!1)},stop:()=>{a.paused.next(!0)},remove:ne,getState:o,destroy:()=>u.unsubscribe(),subjects:a,cancel:e=>C(e).andThen(()=>R({interaction:"cancelJob",jobId:e,interactionId:crypto.randomUUID()}).mapErr(t=>t.error)).map(()=>{})}},$=n=>({run:l=>n(l)}),we=({logger:n})=>{const r=new Map,l=(p,i,o)=>{const{origin:T,networkId:I}=o;return r.set(i,{tabId:p,origin:T,networkId:I}),y(void 0)},s=p=>{const i=r.get(p);return i?b(i.tabId):M(new Error("No tab found"))},a=p=>{const i=r.get(p);return i?b(i.networkId):M(new Error("No tab found"))},m=p=>{const i=[...r.entries()].filter(([,o])=>o.tabId===p).map(([o])=>o);return i.length?b(i):M(new Error("No interactionId found"))};return{add:l,getTabId:s,store:r,getNetworkId:a,getInteractionIdsByTabId:m,removeByTabId:p=>m(p).map(i=>i.forEach(o=>r.delete(o))),getAndRemoveByTabId:p=>m(p).map(i=>(i.forEach(o=>r.delete(o)),i))}},Se=n=>{const r=n.connectorClient,l=n.dAppRequestQueue,s=n.ledgerToWalletQueue,a=n.incomingWalletMessageQueue,m=n.messageRouter,u=n.logger||g;return(d,p,i)=>{switch(d.discriminator){case E.walletMessage:return me(d.data)?(u.debug("\u{1FAAA} -> \u{1F4D2}: walletToLedgerSubject",d.data.interactionId,d.data.discriminator),p(S.walletToLedger("offScreen",d.data)).map(()=>({sendConfirmation:!1}))):(a.add(d.data,d.data.interactionId),b({sendConfirmation:!1}));case E.setConnectionPassword:{const{connectionPassword:o}=d;return o?(r.setConnectionPassword(Buffer.from(o,"hex")),r.connect()):r.disconnect(),b({sendConfirmation:!0})}case E.dAppRequest:{const{interactionId:o,metadata:T}=d.data;return m.add(i,o,T).asyncAndThen(()=>{var I,v;return o?((v=(I=d.data)==null?void 0:I.items)==null?void 0:v.discriminator)==="cancelRequest"?l.cancel(o).andThen(()=>p(S.sendMessageEventToDapp("offScreen","requestCancelSuccess",o),i)):l.add(d.data,o):b(null)}).map(()=>({sendConfirmation:!0}))}case E.offscreenLog:{const o=d.log._meta.logLevelName.toLowerCase()||"debug";return delete d.log._meta,u==null||u[o](...Object.values(d.log)),b({sendConfirmation:!1})}case E.incomingWalletMessage:return m.getTabId(d.data.interactionId).mapErr(()=>({reason:"tabIdNotFound"})).andThen(o=>p(S.walletResponse("offScreen",d.data),o)).andThen(()=>m.getNetworkId(d.data.interactionId)).mapErr(()=>({reason:"networkIdNotFound"})).map(o=>de(S.walletResponse("offScreen",{...d.data,metadata:{networkId:o}}))).map(()=>({sendConfirmation:!0}));case E.ledgerResponse:return s.add(d.data,d.data.interactionId).map(()=>({sendConfirmation:!1}));case E.closeDappTab:{const{tabId:o}=d;return m.getAndRemoveByTabId(o).mapErr(()=>({reason:"tabIdNotFound"})).map(T=>{for(const I of T)x.combine([l.cancel(I),a.cancel(I)])}).map(()=>({sendConfirmation:!1}))}default:return M({reason:"unhandledMessageDiscriminator"})}}},O=we({logger:g}),J=ce({source:"extension",target:"wallet",signalingServerBaseUrl:k.signalingServer.baseUrl,isInitiator:!0,logger:g});J.connect();const q=P({key:"dAppRequestQueue",logger:g,paused:!0,worker:$(n=>J.sendMessage(n.data,{timeout:k.webRTC.confirmationTimeout}).map(()=>O.getTabId(n.data.interactionId).andThen(r=>h.sendMessageAndWaitForConfirmation(S.sendMessageEventToDapp("offScreen","receivedByWallet",n.data.interactionId),r))).mapErr(r=>{const l=r.reason==="notConnected",s=n.numberOfRetries<3;return{...r,shouldRetry:l||s}}))}),W=P({key:"ledgerToWallet",logger:g,worker:$(n=>J.sendMessage(n.data,{timeout:k.webRTC.confirmationTimeout}))}),ge=P({key:"incomingWalletMessageQueue",logger:g,paused:!1,worker:$(n=>h.handleMessage(S.incomingWalletMessage("wallet",n.data)).mapErr(r=>({...r,shouldRetry:!1})))});J.connected$.subscribe(n=>{n?(W.start(),q.start()):(W.stop(),q.stop())});const h=fe(Se({connectorClient:J,dAppRequestQueue:q,ledgerToWalletQueue:W,incomingWalletMessageQueue:ge,messageRouter:O,logger:g}),"offScreen",{logger:g});J.onMessage$.subscribe(n=>{h.onMessage(S.walletMessage("wallet",n))});chrome.runtime.onMessage.addListener((n,r)=>{var l;h.onMessage(n,(l=r.tab)==null?void 0:l.id)});const Je=12e4,Te=le(0,Je);Te.pipe(z(J.connected$,J.shouldConnect$),N(([,n,r])=>!n&&r),K(()=>h.sendMessageAndWaitForConfirmation(S.getConnectionPassword("offScreen")).map(({connectionPassword:n})=>n).andThen(n=>h.handleMessage(S.setConnectionPassword("offScreen",n))))).subscribe();window.radix={messageClient:h,messageRouter:O};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2Zmc2NyZWVuLjBiOGZkNGY4LmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcXVldWVzL190eXBlcy50cyIsIi4uLy4uL3NyYy9xdWV1ZXMvcXVldWUtc3ViamVjdHMudHMiLCIuLi8uLi9zcmMvcXVldWVzL3N0b3JhZ2UvaW4tbWVtb3J5LXN0b3JhZ2UudHMiLCIuLi8uLi9zcmMvcXVldWVzL3F1ZXVlLnRzIiwiLi4vLi4vc3JjL3F1ZXVlcy93b3JrZXIudHMiLCIuLi8uLi9zcmMvbWVzc2FnZS1yb3V0ZXIudHMiLCIuLi8uLi9zcmMvY2hyb21lL29mZnNjcmVlbi9tZXNzYWdlLWhhbmRsZXIudHMiLCIuLi8uLi9zcmMvY2hyb21lL29mZnNjcmVlbi9vZmZzY3JlZW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVzdWx0QXN5bmMgfSBmcm9tICduZXZlcnRocm93J1xuXG5leHBvcnQgdHlwZSBTdG9yYWdlUHJvdmlkZXIgPSB7XG4gIGdldERhdGE6IDxUID0gYW55PihrZXk6IHN0cmluZykgPT4gUmVzdWx0QXN5bmM8VCB8IHVuZGVmaW5lZCwgRXJyb3I+XG4gIHNldERhdGE6IChrZXk6IHN0cmluZywgZGF0YTogYW55KSA9PiBSZXN1bHRBc3luYzx1bmRlZmluZWQsIEVycm9yPlxufVxuXG5leHBvcnQgY29uc3Qgam9iU3RhdHVzID0ge1xuICBwZW5kaW5nOiAncGVuZGluZycsXG4gIHByb2Nlc3Npbmc6ICdwcm9jZXNzaW5nJyxcbiAgY29tcGxldGVkOiAnY29tcGxldGVkJyxcbiAgZmFpbGVkOiAnZmFpbGVkJyxcbn0gYXMgY29uc3RcblxuZXhwb3J0IHR5cGUgSm9iU3RhdHVzID0ga2V5b2YgdHlwZW9mIGpvYlN0YXR1c1xuXG5leHBvcnQgdHlwZSBRdWV1ZVN0YXRlUmF3PFQ+ID0ge1xuICBpdGVtczogUmVjb3JkPHN0cmluZywgSm9iPFQ+PlxuICBpZHM6IFJlY29yZDxKb2JTdGF0dXMsIHN0cmluZ1tdPlxufVxuXG5leHBvcnQgdHlwZSBRdWV1ZVN0YXRlPFQ+ID0ge1xuICBpdGVtczogTWFwPHN0cmluZywgSm9iPFQ+PlxuICBpZHM6IFJlY29yZDxKb2JTdGF0dXMsIFNldDxzdHJpbmc+PlxufVxuXG5leHBvcnQgdHlwZSBKb2I8VD4gPSB7XG4gIGlkOiBzdHJpbmdcbiAgZGF0YTogVFxuICBzdGF0dXM6IEpvYlN0YXR1c1xuICBudW1iZXJPZlJldHJpZXM6IG51bWJlclxuICBjcmVhdGVkQXQ6IG51bWJlclxuICB1cGRhdGVkQXQ6IG51bWJlclxuICBjYW5jZWxlZDogYm9vbGVhblxufVxuXG5leHBvcnQgY29uc3QgcXVldWVJbnRlcmFjdGlvbnMgPSB7XG4gIGFkZEpvYjogJ2FkZEpvYicsXG4gIHJlbW92ZUpvYjogJ3JlbW92ZUpvYicsXG4gIHVwZGF0ZUpvYlN0YXR1czogJ3VwZGF0ZUpvYlN0YXR1cycsXG4gIHJldHJ5Sm9iOiAncmV0cnlKb2InLFxuICBjYW5jZWxKb2I6ICdjYW5jZWxKb2InLFxufSBhcyBjb25zdFxuXG5leHBvcnQgdHlwZSBRdWV1ZUludGVyYWN0aW9ucyA9IHR5cGVvZiBxdWV1ZUludGVyYWN0aW9uc1xuXG5leHBvcnQgY29uc3QgcXVldWVJbnRlcmFjdGlvbkVycm9yVHlwZSA9IHtcbiAgVW5rbm93bkludGVyYWN0aW9uRXJyb3I6ICdVbmtub3duSW50ZXJhY3Rpb25FcnJvcicsXG4gIFNhdmVTdGF0ZUVycm9yOiAnU2F2ZVN0YXRlRXJyb3InLFxuICBHZXRTdGF0ZUVycm9yOiAnR2V0U3RhdGVFcnJvcicsXG4gIEFkZEpvYlRvUXVldWVFcnJvcjogJ0FkZEpvYlRvUXVldWVFcnJvcicsXG4gIFVwZGF0ZUpvYlN0YXR1c0Vycm9yOiAnVXBkYXRlSm9iU3RhdHVzRXJyb3InLFxuICBKb2JBbHJlYWR5RXhpc3RzRXJyb3I6ICdKb2JBbHJlYWR5RXhpc3RzRXJyb3InLFxuICBKb2JOb3RGb3VuZEVycm9yOiAnSm9iTm90Rm91bmRFcnJvcicsXG4gIEZhaWxlZFRvQ2FuY2VsSm9iRXJyb3I6ICdGYWlsZWRUb0NhbmNlbEpvYkVycm9yJyxcbn0gYXMgY29uc3RcblxuZXhwb3J0IHR5cGUgUXVldWVJbnRlcmFjdGlvbkVycm9yID0ge1xuICByZWFzb246IGtleW9mIHR5cGVvZiBxdWV1ZUludGVyYWN0aW9uRXJyb3JUeXBlXG59XG5cbmV4cG9ydCB0eXBlIFF1ZXVlSW50ZXJhY3Rpb248VD4gPVxuICB8IHtcbiAgICAgIGludGVyYWN0aW9uOiBRdWV1ZUludGVyYWN0aW9uc1snYWRkSm9iJ11cbiAgICAgIGpvYjogSm9iPFQ+XG4gICAgICBqb2JJZDogc3RyaW5nXG4gICAgICBpbnRlcmFjdGlvbklkOiBzdHJpbmdcbiAgICB9XG4gIHwge1xuICAgICAgaW50ZXJhY3Rpb246IFF1ZXVlSW50ZXJhY3Rpb25zWyd1cGRhdGVKb2JTdGF0dXMnXVxuICAgICAgc3RhdHVzOiBKb2JTdGF0dXNcbiAgICAgIGpvYklkOiBzdHJpbmdcbiAgICAgIGludGVyYWN0aW9uSWQ6IHN0cmluZ1xuICAgIH1cbiAgfCB7XG4gICAgICBpbnRlcmFjdGlvbjogUXVldWVJbnRlcmFjdGlvbnNbJ3JldHJ5Sm9iJ11cbiAgICAgIGpvYklkOiBzdHJpbmdcbiAgICAgIGludGVyYWN0aW9uSWQ6IHN0cmluZ1xuICAgIH1cbiAgfCB7XG4gICAgICBpbnRlcmFjdGlvbjogUXVldWVJbnRlcmFjdGlvbnNbJ3JlbW92ZUpvYiddXG4gICAgICBqb2JJZDogc3RyaW5nXG4gICAgICBpbnRlcmFjdGlvbklkOiBzdHJpbmdcbiAgICB9XG4gIHwge1xuICAgICAgaW50ZXJhY3Rpb246IFF1ZXVlSW50ZXJhY3Rpb25zWydjYW5jZWxKb2InXVxuICAgICAgam9iSWQ6IHN0cmluZ1xuICAgICAgaW50ZXJhY3Rpb25JZDogc3RyaW5nXG4gICAgfVxuIiwiaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSAnbmV2ZXJ0aHJvdydcbmltcG9ydCB7IFJlcGxheVN1YmplY3QsIFN1YmplY3QgfSBmcm9tICdyeGpzJ1xuaW1wb3J0IHsgUXVldWVJbnRlcmFjdGlvbiwgUXVldWVJbnRlcmFjdGlvbkVycm9yIH0gZnJvbSAnLi9fdHlwZXMnXG5cbmV4cG9ydCB0eXBlIFF1ZXVlU3ViamVjdHM8VD4gPSBSZXR1cm5UeXBlPHR5cGVvZiBRdWV1ZVN1YmplY3RzPFQ+PlxuXG5leHBvcnQgY29uc3QgUXVldWVTdWJqZWN0cyA9IDxUPigpID0+ICh7XG4gIHBhdXNlZDogbmV3IFJlcGxheVN1YmplY3Q8Ym9vbGVhbj4oMSksXG4gIHF1ZXVlSW50ZXJhY3Rpb246IG5ldyBTdWJqZWN0PFF1ZXVlSW50ZXJhY3Rpb248VD4+KCksXG4gIHF1ZXVlSW50ZXJhY3Rpb25SZXN1bHQ6IG5ldyBTdWJqZWN0PFxuICAgIFJlc3VsdDxcbiAgICAgIFF1ZXVlSW50ZXJhY3Rpb248VD4sXG4gICAgICB7XG4gICAgICAgIGVycm9yOiBRdWV1ZUludGVyYWN0aW9uRXJyb3JcbiAgICAgICAgaW50ZXJhY3Rpb246IFF1ZXVlSW50ZXJhY3Rpb248VD5cbiAgICAgIH1cbiAgICA+XG4gID4oKSxcbiAgcHJvY2Vzc05leHRKb2I6IG5ldyBTdWJqZWN0PHZvaWQ+KCksXG59KVxuIiwiaW1wb3J0IHsgb2ssIFJlc3VsdEFzeW5jIH0gZnJvbSAnbmV2ZXJ0aHJvdydcbmltcG9ydCB7IFN0b3JhZ2VQcm92aWRlciB9IGZyb20gJ3F1ZXVlcy9fdHlwZXMnXG5pbXBvcnQgeyBwYXJzZUpTT04gfSBmcm9tICd1dGlscydcblxuZXhwb3J0IGNvbnN0IEluTWVtb3J5U3RvcmFnZSA9ICgpOiBTdG9yYWdlUHJvdmlkZXIgPT4ge1xuICBjb25zdCBzdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KClcblxuICBjb25zdCBnZXREYXRhID0gKGtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+ID0+XG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHN0b3JlLmdldChrZXkpXG4gICAgICAgIHJlc29sdmUoZGF0YSA/PyB1bmRlZmluZWQpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpXG4gICAgICB9XG4gICAgfSlcblxuICBjb25zdCBzZXREYXRhID0gKGtleTogc3RyaW5nLCBkYXRhOiB1bmtub3duKTogUHJvbWlzZTx1bmRlZmluZWQ+ID0+XG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RvcmUuc2V0KGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICAgIHJlc29sdmUodW5kZWZpbmVkKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgfVxuICAgIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBnZXREYXRhOiA8VCA9IGFueT4oa2V5OiBzdHJpbmcpID0+XG4gICAgICBSZXN1bHRBc3luYy5mcm9tUHJvbWlzZShnZXREYXRhKGtleSksIChlcnJvcikgPT4gZXJyb3IgYXMgRXJyb3IpLmFuZFRoZW4oXG4gICAgICAgIChkYXRhKSA9PiAoZGF0YSA/IHBhcnNlSlNPTjxUPihkYXRhKSA6IG9rKHVuZGVmaW5lZCkpLFxuICAgICAgKSxcbiAgICBzZXREYXRhOiAoa2V5OiBzdHJpbmcsIGRhdGE6IHVua25vd24pID0+XG4gICAgICBSZXN1bHRBc3luYy5mcm9tUHJvbWlzZShzZXREYXRhKGtleSwgZGF0YSksIChlcnJvcikgPT4gZXJyb3IgYXMgRXJyb3IpLFxuICB9XG59XG4iLCJpbXBvcnQge1xuICBjb25jYXRNYXAsXG4gIGZpbHRlcixcbiAgZmlyc3RWYWx1ZUZyb20sXG4gIG1lcmdlLFxuICBvZixcbiAgU3Vic2NyaXB0aW9uLFxuICBzd2l0Y2hNYXAsXG4gIHRhcCxcbiAgd2l0aExhdGVzdEZyb20sXG59IGZyb20gJ3J4anMnXG5pbXBvcnQgeyBlcnIsIGVyckFzeW5jLCBvaywgb2tBc3luYywgUmVzdWx0LCBSZXN1bHRBc3luYyB9IGZyb20gJ25ldmVydGhyb3cnXG5pbXBvcnQge1xuICBKb2IsXG4gIGpvYlN0YXR1cyxcbiAgSm9iU3RhdHVzLFxuICBRdWV1ZUludGVyYWN0aW9uLFxuICBRdWV1ZUludGVyYWN0aW9uRXJyb3IsXG4gIHF1ZXVlSW50ZXJhY3Rpb25FcnJvclR5cGUsXG4gIHF1ZXVlSW50ZXJhY3Rpb25zLFxuICBRdWV1ZVN0YXRlLFxuICBRdWV1ZVN0YXRlUmF3LFxuICBTdG9yYWdlUHJvdmlkZXIsXG59IGZyb20gJy4vX3R5cGVzJ1xuaW1wb3J0IHsgV29ya2VyIH0gZnJvbSAnLi93b3JrZXInXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICd0c2xvZydcbmltcG9ydCB7IFF1ZXVlU3ViamVjdHMgfSBmcm9tICcuL3F1ZXVlLXN1YmplY3RzJ1xuaW1wb3J0IHsgSW5NZW1vcnlTdG9yYWdlIH0gZnJvbSAnLi9zdG9yYWdlL2luLW1lbW9yeS1zdG9yYWdlJ1xuXG5leHBvcnQgdHlwZSBRdWV1ZU9wdGlvbnM8VD4gPSB7XG4gIGtleTogc3RyaW5nXG4gIHdvcmtlcjogV29ya2VyPFQ+XG4gIHN0b3JhZ2U/OiBTdG9yYWdlUHJvdmlkZXJcbiAgbG9nZ2VyPzogTG9nZ2VyPHVua25vd24+XG4gIHN1YmplY3RzPzogUXVldWVTdWJqZWN0czxUPlxuICBwYXVzZWQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIFF1ZXVlPFQgPSBhbnk+ID0gUmV0dXJuVHlwZTx0eXBlb2YgUXVldWU8VD4+XG5cbmV4cG9ydCBjb25zdCBRdWV1ZSA9IDxUPih7XG4gIHN0b3JhZ2UgPSBJbk1lbW9yeVN0b3JhZ2UoKSxcbiAga2V5LFxuICB3b3JrZXIsXG4gIGxvZ2dlcixcbiAgc3ViamVjdHMgPSBRdWV1ZVN1YmplY3RzPFQ+KCksXG4gIHBhdXNlZCA9IGZhbHNlLFxufTogUXVldWVPcHRpb25zPFQ+KSA9PiB7XG4gIHN1YmplY3RzLnBhdXNlZC5uZXh0KHBhdXNlZClcbiAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IG5ldyBTdWJzY3JpcHRpb24oKVxuXG4gIGNvbnN0IGRlY29kZVN0YXRlRGF0YSA9IChcbiAgICBkYXRhOiBRdWV1ZVN0YXRlUmF3PFQ+LFxuICApOiBSZXN1bHQ8UXVldWVTdGF0ZTxUPiwgbmV2ZXI+ID0+XG4gICAgb2soe1xuICAgICAgaXRlbXM6IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZGF0YS5pdGVtcykpLFxuICAgICAgaWRzOiB7XG4gICAgICAgIFtqb2JTdGF0dXMucGVuZGluZ106IG5ldyBTZXQ8c3RyaW5nPihkYXRhLmlkcy5wZW5kaW5nKSxcbiAgICAgICAgW2pvYlN0YXR1cy5wcm9jZXNzaW5nXTogbmV3IFNldDxzdHJpbmc+KGRhdGEuaWRzLnByb2Nlc3NpbmcpLFxuICAgICAgICBbam9iU3RhdHVzLmNvbXBsZXRlZF06IG5ldyBTZXQ8c3RyaW5nPihkYXRhLmlkcy5jb21wbGV0ZWQpLFxuICAgICAgICBbam9iU3RhdHVzLmZhaWxlZF06IG5ldyBTZXQ8c3RyaW5nPihkYXRhLmlkcy5mYWlsZWQpLFxuICAgICAgfSxcbiAgICB9KVxuXG4gIGNvbnN0IHRyYW5zZm9ybVN0YXRlID0gKFxuICAgIGRhdGE6IFF1ZXVlU3RhdGU8VD4sXG4gICk6IFJlc3VsdDxRdWV1ZVN0YXRlUmF3PFQ+LCBuZXZlcj4gPT5cbiAgICBvayh7XG4gICAgICBpdGVtczogWy4uLmRhdGEuaXRlbXMuZW50cmllcygpXS5yZWR1Y2UoXG4gICAgICAgIChhY2MsIFtpZCwgaXRlbV0pID0+ICh7IC4uLmFjYywgW2lkXTogaXRlbSB9KSxcbiAgICAgICAge30sXG4gICAgICApLFxuICAgICAgaWRzOiB7XG4gICAgICAgIFtqb2JTdGF0dXMucGVuZGluZ106IFsuLi5kYXRhLmlkcy5wZW5kaW5nLnZhbHVlcygpXSxcbiAgICAgICAgW2pvYlN0YXR1cy5wcm9jZXNzaW5nXTogWy4uLmRhdGEuaWRzLnByb2Nlc3NpbmcudmFsdWVzKCldLFxuICAgICAgICBbam9iU3RhdHVzLmNvbXBsZXRlZF06IFsuLi5kYXRhLmlkcy5jb21wbGV0ZWQudmFsdWVzKCldLFxuICAgICAgICBbam9iU3RhdHVzLmZhaWxlZF06IFsuLi5kYXRhLmlkcy5mYWlsZWQudmFsdWVzKCldLFxuICAgICAgfSxcbiAgICB9KVxuXG4gIGNvbnN0IGRlZmF1bHRTdGF0ZTogUXVldWVTdGF0ZVJhdzxUPiA9IHtcbiAgICBpdGVtczoge30sXG4gICAgaWRzOiB7XG4gICAgICBwZW5kaW5nOiBbXSxcbiAgICAgIHByb2Nlc3Npbmc6IFtdLFxuICAgICAgY29tcGxldGVkOiBbXSxcbiAgICAgIGZhaWxlZDogW10sXG4gICAgfSxcbiAgfVxuXG4gIGNvbnN0IGdldFN0YXRlID0gKCk6IFJlc3VsdEFzeW5jPFF1ZXVlU3RhdGU8VD4sIFF1ZXVlSW50ZXJhY3Rpb25FcnJvcj4gPT5cbiAgICBzdG9yYWdlXG4gICAgICAuZ2V0RGF0YTxRdWV1ZVN0YXRlUmF3PFQ+PihrZXkpXG4gICAgICAubWFwKChkYXRhKSA9PiBkYXRhID8/IGRlZmF1bHRTdGF0ZSlcbiAgICAgIC5hbmRUaGVuKGRlY29kZVN0YXRlRGF0YSlcbiAgICAgIC5tYXBFcnIoKCkgPT4gKHsgcmVhc29uOiAnR2V0U3RhdGVFcnJvcicgfSkpXG5cbiAgY29uc3Qgc2F2ZVN0YXRlID0gKFxuICAgIHN0YXRlOiBRdWV1ZVN0YXRlPFQ+LFxuICApOiBSZXN1bHRBc3luYzx1bmRlZmluZWQsIFF1ZXVlSW50ZXJhY3Rpb25FcnJvcj4gPT5cbiAgICB0cmFuc2Zvcm1TdGF0ZShzdGF0ZSlcbiAgICAgIC5hc3luY0FuZFRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgbG9nZ2VyPy50cmFjZShgWyR7a2V5fV0gc2F2ZVN0YXRlYCwgZGF0YS5pZHMpXG4gICAgICAgIHJldHVybiBzdG9yYWdlLnNldERhdGEoa2V5LCBkYXRhKVxuICAgICAgfSlcbiAgICAgIC5tYXBFcnIoKCkgPT4gKHsgcmVhc29uOiAnU2F2ZVN0YXRlRXJyb3InIH0pKVxuXG4gIGNvbnN0IGFkZEpvYlRvUGVuZGluZ1F1ZXVlID0gKFxuICAgIGpvYjogSm9iPFQ+LFxuICAgIHN0YXRlOiBRdWV1ZVN0YXRlPFQ+LFxuICApOiBSZXN1bHRBc3luYzxRdWV1ZVN0YXRlPFQ+LCBuZXZlcj4gPT4ge1xuICAgIGxvZ2dlcj8uZGVidWcoYFske2tleX1dIGFkZEpvYmAsIHsgam9iIH0pXG4gICAgc3RhdGUuaXRlbXMuc2V0KGpvYi5pZCwgeyAuLi5qb2IsIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSB9KVxuICAgIHN0YXRlLmlkcy5wZW5kaW5nLmFkZChqb2IuaWQpXG4gICAgcmV0dXJuIG9rQXN5bmMoc3RhdGUpXG4gIH1cblxuICBjb25zdCB1cGRhdGVKb2JTdGF0dXNRdWV1ZUludGVyYWN0aW9uID0gKHtcbiAgICBqb2IsXG4gICAgc3RhdHVzLFxuICAgIHN0YXRlLFxuICAgIG51bWJlck9mUmV0cmllcyxcbiAgfToge1xuICAgIGpvYjogSm9iPFQ+XG4gICAgc3RhdHVzOiBKb2JTdGF0dXNcbiAgICBzdGF0ZTogUXVldWVTdGF0ZTxUPlxuICAgIG51bWJlck9mUmV0cmllcz86IG51bWJlclxuICB9KTogUmVzdWx0QXN5bmM8UXVldWVTdGF0ZTxUPiwgUXVldWVJbnRlcmFjdGlvbkVycm9yPiA9PiB7XG4gICAgY29uc3Qgam9iSWQgPSBqb2IuaWRcbiAgICBsb2dnZXI/LmRlYnVnKGBbJHtrZXl9XSB1cGRhdGVKb2JTdGF0dXNgLCB7XG4gICAgICBqb2JJZDogam9iLmlkLFxuICAgICAgZnJvbVN0YXR1czogam9iLnN0YXR1cyxcbiAgICAgIHRvU3RhdHVzOiBzdGF0dXMsXG4gICAgfSlcblxuICAgIGNvbnN0IHVwZGF0ZWRKb2I6IEpvYjxUPiA9IHsgLi4uam9iLCB1cGRhdGVkQXQ6IERhdGUubm93KCksIHN0YXR1cyB9XG5cbiAgICBpZiAobnVtYmVyT2ZSZXRyaWVzKSB1cGRhdGVkSm9iLm51bWJlck9mUmV0cmllcyA9IG51bWJlck9mUmV0cmllc1xuXG4gICAgc3RhdGUuaXRlbXMuc2V0KGpvYklkLCB1cGRhdGVkSm9iKVxuICAgIHN0YXRlLmlkc1tqb2Iuc3RhdHVzXS5kZWxldGUoam9iSWQpXG4gICAgc3RhdGUuaWRzW3N0YXR1c10uYWRkKGpvYklkKVxuXG4gICAgcmV0dXJuIG9rQXN5bmMoc3RhdGUpXG4gIH1cblxuICBjb25zdCByZW1vdmVKb2JRdWV1ZUludGVyYWN0aW9uID0gKFxuICAgIGpvYklkOiBzdHJpbmcsXG4gICAgc3RhdGU6IFF1ZXVlU3RhdGU8VD4sXG4gICk6IFJlc3VsdEFzeW5jPFF1ZXVlU3RhdGU8VD4sIFF1ZXVlSW50ZXJhY3Rpb25FcnJvcj4gPT4ge1xuICAgIGxvZ2dlcj8uZGVidWcoYFske2tleX1dIHJlbW92ZUpvYmAsIHtcbiAgICAgIGpvYklkLFxuICAgIH0pXG5cbiAgICBzdGF0ZS5pdGVtcy5kZWxldGUoam9iSWQpXG4gICAgc3RhdGUuaWRzLnBlbmRpbmcuZGVsZXRlKGpvYklkKVxuICAgIHN0YXRlLmlkcy5jb21wbGV0ZWQuZGVsZXRlKGpvYklkKVxuICAgIHN0YXRlLmlkcy5mYWlsZWQuZGVsZXRlKGpvYklkKVxuICAgIHN0YXRlLmlkcy5wcm9jZXNzaW5nLmRlbGV0ZShqb2JJZClcblxuICAgIHJldHVybiBva0FzeW5jKHN0YXRlKVxuICB9XG5cbiAgY29uc3QgdXBkYXRlU3RhdGUgPVxuICAgIChpbnRlcmFjdGlvbjogUXVldWVJbnRlcmFjdGlvbjxUPikgPT5cbiAgICAoXG4gICAgICBzdGF0ZTogUXVldWVTdGF0ZTxUPixcbiAgICApOiBSZXN1bHRBc3luYzxRdWV1ZVN0YXRlPFQ+LCBRdWV1ZUludGVyYWN0aW9uRXJyb3I+ID0+IHtcbiAgICAgIHN3aXRjaCAoaW50ZXJhY3Rpb24uaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgY2FzZSBxdWV1ZUludGVyYWN0aW9ucy5hZGRKb2I6XG4gICAgICAgICAgcmV0dXJuIGFkZEpvYlRvUGVuZGluZ1F1ZXVlKGludGVyYWN0aW9uLmpvYiwgc3RhdGUpXG5cbiAgICAgICAgY2FzZSBxdWV1ZUludGVyYWN0aW9ucy5yZW1vdmVKb2I6XG4gICAgICAgICAgcmV0dXJuIHJlbW92ZUpvYlF1ZXVlSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24uam9iSWQsIHN0YXRlKVxuXG4gICAgICAgIGNhc2UgcXVldWVJbnRlcmFjdGlvbnMudXBkYXRlSm9iU3RhdHVzOlxuICAgICAgICAgIHJldHVybiBnZXRKb2JCeUlkKGludGVyYWN0aW9uLmpvYklkKS5hbmRUaGVuKChqb2IpID0+XG4gICAgICAgICAgICB1cGRhdGVKb2JTdGF0dXNRdWV1ZUludGVyYWN0aW9uKHsgLi4uaW50ZXJhY3Rpb24sIHN0YXRlLCBqb2IgfSksXG4gICAgICAgICAgKVxuXG4gICAgICAgIGNhc2UgcXVldWVJbnRlcmFjdGlvbnMucmV0cnlKb2I6XG4gICAgICAgICAgcmV0dXJuIGdldEpvYkJ5SWQoaW50ZXJhY3Rpb24uam9iSWQpLmFuZFRoZW4oKGpvYikgPT5cbiAgICAgICAgICAgIHVwZGF0ZUpvYlN0YXR1c1F1ZXVlSW50ZXJhY3Rpb24oe1xuICAgICAgICAgICAgICAuLi5pbnRlcmFjdGlvbixcbiAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgIGpvYixcbiAgICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgICAgIG51bWJlck9mUmV0cmllczogam9iLm51bWJlck9mUmV0cmllcyArIDEsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG5cbiAgICAgICAgY2FzZSBxdWV1ZUludGVyYWN0aW9ucy5jYW5jZWxKb2I6XG4gICAgICAgICAgcmV0dXJuIGdldEpvYkJ5SWQoaW50ZXJhY3Rpb24uam9iSWQpLmFuZFRoZW4oKGpvYikgPT4ge1xuICAgICAgICAgICAgaWYgKGpvYi5zdGF0dXMgPT09ICdwZW5kaW5nJylcbiAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUpvYlN0YXR1c1F1ZXVlSW50ZXJhY3Rpb24oe1xuICAgICAgICAgICAgICAgIGpvYjogeyAuLi5qb2IsIGNhbmNlbGVkOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcmV0dXJuIGVyckFzeW5jKHtcbiAgICAgICAgICAgICAgcmVhc29uOiBxdWV1ZUludGVyYWN0aW9uRXJyb3JUeXBlLkZhaWxlZFRvQ2FuY2VsSm9iRXJyb3IsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gIGNvbnN0IGNoZWNrSWZKb2JFeGlzdHMgPSAoaWQ6IHN0cmluZykgPT5cbiAgICBnZXRTdGF0ZSgpLm1hcCgoc3RhdGUpID0+IHN0YXRlLml0ZW1zLmhhcyhpZCkpXG5cbiAgY29uc3QgYWRkSm9iID0gKGRhdGE6IFQsIGlkOiBzdHJpbmcpID0+XG4gICAgY2hlY2tJZkpvYkV4aXN0cyhpZCkuYW5kVGhlbigoZXhpc3RzKSA9PlxuICAgICAgZXhpc3RzXG4gICAgICAgID8gZXJyQXN5bmMoe1xuICAgICAgICAgICAgcmVhc29uOiBxdWV1ZUludGVyYWN0aW9uRXJyb3JUeXBlLkpvYkFscmVhZHlFeGlzdHNFcnJvcixcbiAgICAgICAgICB9KVxuICAgICAgICA6IGFkZFF1ZXVlSW50ZXJhY3Rpb25BbmRXYWl0Rm9yU3RhdGVVcGRhdGUoe1xuICAgICAgICAgICAgaW50ZXJhY3Rpb246ICdhZGRKb2InLFxuICAgICAgICAgICAgam9iOiB7XG4gICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICBzdGF0dXM6IGpvYlN0YXR1cy5wZW5kaW5nLFxuICAgICAgICAgICAgICBudW1iZXJPZlJldHJpZXM6IDAsXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICBjYW5jZWxlZDogZmFsc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgam9iSWQ6IGlkLFxuICAgICAgICAgICAgaW50ZXJhY3Rpb25JZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICB9KS5tYXBFcnIoKGVycikgPT4gZXJyLmVycm9yKSxcbiAgICApXG5cbiAgY29uc3QgYWRkUXVldWVJbnRlcmFjdGlvbkFuZFdhaXRGb3JTdGF0ZVVwZGF0ZSA9IChcbiAgICBpbnRlcmFjdGlvbjogUXVldWVJbnRlcmFjdGlvbjxUPixcbiAgKTogUmVzdWx0QXN5bmM8XG4gICAgUXVldWVJbnRlcmFjdGlvbjxUPixcbiAgICB7XG4gICAgICBlcnJvcjogUXVldWVJbnRlcmFjdGlvbkVycm9yXG4gICAgICBpbnRlcmFjdGlvbjogUXVldWVJbnRlcmFjdGlvbjxUPlxuICAgIH1cbiAgPiA9PiB7XG4gICAgY29uc3Qgd2FpdEZvclN0YXRlVXBkYXRlJCA9IHN1YmplY3RzLnF1ZXVlSW50ZXJhY3Rpb25SZXN1bHQucGlwZShcbiAgICAgIGZpbHRlcigocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQuaXNFcnIoKSlcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcmVzdWx0LmVycm9yLmludGVyYWN0aW9uLmludGVyYWN0aW9uSWQgPT09IGludGVyYWN0aW9uLmludGVyYWN0aW9uSWRcbiAgICAgICAgICApXG4gICAgICAgIHJldHVybiByZXN1bHQudmFsdWUuaW50ZXJhY3Rpb25JZCA9PT0gaW50ZXJhY3Rpb24uaW50ZXJhY3Rpb25JZFxuICAgICAgfSksXG4gICAgKVxuXG4gICAgY29uc3QgZGlzcGF0Y2hTdGF0ZVVwZGF0ZSQgPSBvZih0cnVlKS5waXBlKFxuICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgc3ViamVjdHMucXVldWVJbnRlcmFjdGlvbi5uZXh0KGludGVyYWN0aW9uKVxuICAgICAgfSksXG4gICAgICBmaWx0ZXIoKHYpOiB2IGlzIG5ldmVyID0+IGZhbHNlKSxcbiAgICApXG5cbiAgICByZXR1cm4gUmVzdWx0QXN5bmMuZnJvbVByb21pc2UoXG4gICAgICBmaXJzdFZhbHVlRnJvbShtZXJnZSh3YWl0Rm9yU3RhdGVVcGRhdGUkLCBkaXNwYXRjaFN0YXRlVXBkYXRlJCkpLFxuICAgICAgKGVycm9yKSA9PlxuICAgICAgICBlcnJvciBhcyB7XG4gICAgICAgICAgZXJyb3I6IFF1ZXVlSW50ZXJhY3Rpb25FcnJvclxuICAgICAgICAgIGludGVyYWN0aW9uOiBRdWV1ZUludGVyYWN0aW9uPFQ+XG4gICAgICAgIH0sXG4gICAgKS5hbmRUaGVuKChyZXN1bHQpID0+IHJlc3VsdClcbiAgfVxuXG4gIGNvbnN0IGdldEpvYkJ5SWQgPSAoaWQ6IHN0cmluZykgPT5cbiAgICBnZXRTdGF0ZSgpXG4gICAgICAubWFwKChzdGF0ZSkgPT4gc3RhdGUuaXRlbXMuZ2V0KGlkKSlcbiAgICAgIC5hbmRUaGVuKFxuICAgICAgICAoam9iKTogUmVzdWx0PEpvYjxUPiwgUXVldWVJbnRlcmFjdGlvbkVycm9yPiA9PlxuICAgICAgICAgIGpvYlxuICAgICAgICAgICAgPyBvayhqb2IpXG4gICAgICAgICAgICA6IGVycih7IHJlYXNvbjogcXVldWVJbnRlcmFjdGlvbkVycm9yVHlwZS5Kb2JOb3RGb3VuZEVycm9yIH0pLFxuICAgICAgKVxuXG4gIHN1YnNjcmlwdGlvbnMuYWRkKFxuICAgIHN1YmplY3RzLnF1ZXVlSW50ZXJhY3Rpb25cbiAgICAgIC5waXBlKFxuICAgICAgICBjb25jYXRNYXAoKGludGVyYWN0aW9uKSA9PlxuICAgICAgICAgIGdldFN0YXRlKClcbiAgICAgICAgICAgIC5hbmRUaGVuKHVwZGF0ZVN0YXRlKGludGVyYWN0aW9uKSlcbiAgICAgICAgICAgIC5hbmRUaGVuKHNhdmVTdGF0ZSlcbiAgICAgICAgICAgIC5tYXAoKCkgPT4gaW50ZXJhY3Rpb24pXG4gICAgICAgICAgICAubWFwRXJyKChlcnJvcikgPT4gKHsgZXJyb3IsIGludGVyYWN0aW9uIH0pKSxcbiAgICAgICAgKSxcbiAgICAgICAgdGFwKChyZXN1bHQpID0+IHN1YmplY3RzLnF1ZXVlSW50ZXJhY3Rpb25SZXN1bHQubmV4dChyZXN1bHQpKSxcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKSxcbiAgKVxuXG4gIGNvbnN0IGdldE5leHRQZW5kaW5nSm9iID0gKCk6IFJlc3VsdEFzeW5jPEpvYjxUPiwgUXVldWVJbnRlcmFjdGlvbkVycm9yPiA9PlxuICAgIGdldFN0YXRlKClcbiAgICAgIC5hbmRUaGVuKChzdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IHN0YXRlLmlkcy5wZW5kaW5nLnZhbHVlcygpLm5leHQoKS52YWx1ZVxuICAgICAgICByZXR1cm4gaWRcbiAgICAgICAgICA/IG9rKGlkKVxuICAgICAgICAgIDogZXJyKHsgcmVhc29uOiBxdWV1ZUludGVyYWN0aW9uRXJyb3JUeXBlLkpvYk5vdEZvdW5kRXJyb3IgfSlcbiAgICAgIH0pXG4gICAgICAuYW5kVGhlbihnZXRKb2JCeUlkKVxuXG4gIGNvbnN0IHVwZGF0ZUpvYlN0YXR1cyA9IChqb2JJZDogc3RyaW5nLCBzdGF0dXM6IEpvYlN0YXR1cykgPT4ge1xuICAgIGNvbnN0IGludGVyYWN0aW9uSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXG4gICAgcmV0dXJuIGFkZFF1ZXVlSW50ZXJhY3Rpb25BbmRXYWl0Rm9yU3RhdGVVcGRhdGUoe1xuICAgICAgaW50ZXJhY3Rpb246ICd1cGRhdGVKb2JTdGF0dXMnLFxuICAgICAgam9iSWQsXG4gICAgICBzdGF0dXMsXG4gICAgICBpbnRlcmFjdGlvbklkLFxuICAgIH0pXG4gIH1cblxuICBjb25zdCByZXRyeUpvYiA9IChqb2JJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaW50ZXJhY3Rpb25JZCA9IGNyeXB0by5yYW5kb21VVUlEKClcbiAgICByZXR1cm4gYWRkUXVldWVJbnRlcmFjdGlvbkFuZFdhaXRGb3JTdGF0ZVVwZGF0ZSh7XG4gICAgICBpbnRlcmFjdGlvbjogJ3JldHJ5Sm9iJyxcbiAgICAgIGpvYklkLFxuICAgICAgaW50ZXJhY3Rpb25JZCxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgcmVtb3ZlSm9iID0gKGpvYklkOiBzdHJpbmcpID0+XG4gICAgYWRkUXVldWVJbnRlcmFjdGlvbkFuZFdhaXRGb3JTdGF0ZVVwZGF0ZSh7XG4gICAgICBqb2JJZCxcbiAgICAgIGludGVyYWN0aW9uOiAncmVtb3ZlSm9iJyxcbiAgICAgIGludGVyYWN0aW9uSWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgfSlcblxuICBjb25zdCBwcm9jZXNzTmV4dEpvYiA9IChqb2I6IEpvYjxUPikgPT5cbiAgICB1cGRhdGVKb2JTdGF0dXMoam9iLmlkLCAncHJvY2Vzc2luZycpXG4gICAgICAuYW5kVGhlbigoKSA9PlxuICAgICAgICB3b3JrZXJcbiAgICAgICAgICAucnVuKGpvYilcbiAgICAgICAgICAubWFwRXJyKCh7IHNob3VsZFJldHJ5IH0pID0+XG4gICAgICAgICAgICBzaG91bGRSZXRyeSA/IHJldHJ5Sm9iKGpvYi5pZCkgOiB1cGRhdGVKb2JTdGF0dXMoam9iLmlkLCAnZmFpbGVkJyksXG4gICAgICAgICAgKSxcbiAgICAgIClcbiAgICAgIC5hbmRUaGVuKCgpID0+IHVwZGF0ZUpvYlN0YXR1cyhqb2IuaWQsICdjb21wbGV0ZWQnKSlcbiAgICAgIC5tYXAoKCkgPT4ge1xuICAgICAgICBzdWJqZWN0cy5wcm9jZXNzTmV4dEpvYi5uZXh0KClcbiAgICAgIH0pXG4gICAgICAubWFwRXJyKCgpID0+IHtcbiAgICAgICAgc3ViamVjdHMucHJvY2Vzc05leHRKb2IubmV4dCgpXG4gICAgICB9KVxuXG4gIGNvbnN0IG9uU3RhdGVDaGFuZ2UkID0gc3ViamVjdHMucXVldWVJbnRlcmFjdGlvblJlc3VsdC5waXBlKFxuICAgIGZpbHRlcigocmVzdWx0KSA9PiByZXN1bHQuaXNPaygpKSxcbiAgKVxuXG4gIGNvbnN0IHNob3VsZFByb2Nlc3NKb2JzJCA9IHN1YmplY3RzLnBhdXNlZC5waXBlKFxuICAgIGZpbHRlcigoaXNQYXVzZWQpID0+ICFpc1BhdXNlZCksXG4gIClcblxuICBzdWJzY3JpcHRpb25zLmFkZChcbiAgICBtZXJnZShvblN0YXRlQ2hhbmdlJCwgc3ViamVjdHMucGF1c2VkLCBzdWJqZWN0cy5wcm9jZXNzTmV4dEpvYilcbiAgICAgIC5waXBlKFxuICAgICAgICBjb25jYXRNYXAoKCkgPT5cbiAgICAgICAgICBvZih0cnVlKS5waXBlKFxuICAgICAgICAgICAgd2l0aExhdGVzdEZyb20oc2hvdWxkUHJvY2Vzc0pvYnMkKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiBnZXROZXh0UGVuZGluZ0pvYigpLmFuZFRoZW4ocHJvY2Vzc05leHRKb2IpKSxcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpLFxuICApXG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGFkZEpvYixcbiAgICBzdGFydDogKCkgPT4ge1xuICAgICAgc3ViamVjdHMucGF1c2VkLm5leHQoZmFsc2UpXG4gICAgfSxcbiAgICBzdG9wOiAoKSA9PiB7XG4gICAgICBzdWJqZWN0cy5wYXVzZWQubmV4dCh0cnVlKVxuICAgIH0sXG4gICAgcmVtb3ZlOiByZW1vdmVKb2IsXG4gICAgZ2V0U3RhdGUsXG4gICAgZGVzdHJveTogKCkgPT4gc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpLFxuICAgIHN1YmplY3RzLFxuICAgIGNhbmNlbDogKGpvYklkOiBzdHJpbmcpID0+XG4gICAgICBnZXRKb2JCeUlkKGpvYklkKVxuICAgICAgICAuYW5kVGhlbigoKSA9PlxuICAgICAgICAgIGFkZFF1ZXVlSW50ZXJhY3Rpb25BbmRXYWl0Rm9yU3RhdGVVcGRhdGUoe1xuICAgICAgICAgICAgaW50ZXJhY3Rpb246ICdjYW5jZWxKb2InLFxuICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICBpbnRlcmFjdGlvbklkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgIH0pLm1hcEVycigoZXJyKSA9PiBlcnIuZXJyb3IpLFxuICAgICAgICApXG4gICAgICAgIC5tYXAoKCkgPT4gdW5kZWZpbmVkKSxcbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVzdWx0QXN5bmMgfSBmcm9tICduZXZlcnRocm93J1xuaW1wb3J0IHsgSm9iIH0gZnJvbSAnLi9fdHlwZXMnXG5cbmV4cG9ydCB0eXBlIFdvcmtlcjxUPiA9IFJldHVyblR5cGU8dHlwZW9mIFdvcmtlcjxUPj5cblxuZXhwb3J0IHR5cGUgV29ya2VyRXJyb3IgPSB7XG4gIHJlYXNvbjogc3RyaW5nXG4gIG1lc3NhZ2U/OiBzdHJpbmdcbiAganNFcnJvcj86IEVycm9yXG4gIHNob3VsZFJldHJ5PzogYm9vbGVhblxufVxuXG5leHBvcnQgdHlwZSBXb3JrZXJSdW5uZXJPdXRwdXQgPSBSZXN1bHRBc3luYzxhbnksIFdvcmtlckVycm9yPlxuXG5leHBvcnQgY29uc3QgV29ya2VyID0gPFQ+KGZuOiAoam9iOiBKb2I8VD4pID0+IFdvcmtlclJ1bm5lck91dHB1dCkgPT4ge1xuICBjb25zdCBydW4gPSAoam9iOiBKb2I8VD4pOiBXb3JrZXJSdW5uZXJPdXRwdXQgPT4gZm4oam9iKVxuICByZXR1cm4geyBydW4gfVxufVxuIiwiaW1wb3J0IHsgZXJyLCBlcnJBc3luYywgb2ssIG9rQXN5bmMsIFJlc3VsdEFzeW5jIH0gZnJvbSAnbmV2ZXJ0aHJvdydcbmltcG9ydCB7IEFwcExvZ2dlciB9IGZyb20gJ3V0aWxzL2xvZ2dlcidcblxuZXhwb3J0IHR5cGUgTWVzc2FnZXNSb3V0ZXIgPSBSZXR1cm5UeXBlPHR5cGVvZiBNZXNzYWdlc1JvdXRlcj5cblxuZXhwb3J0IGNvbnN0IE1lc3NhZ2VzUm91dGVyID0gKHsgbG9nZ2VyIH06IHsgbG9nZ2VyOiBBcHBMb2dnZXIgfSkgPT4ge1xuICBjb25zdCBzdG9yZSA9IG5ldyBNYXA8XG4gICAgc3RyaW5nLFxuICAgIHsgdGFiSWQ6IG51bWJlcjsgb3JpZ2luOiBzdHJpbmc7IG5ldHdvcmtJZDogbnVtYmVyIH1cbiAgPigpXG5cbiAgY29uc3QgYWRkID0gKFxuICAgIHRhYklkOiBudW1iZXIsXG4gICAgaW50ZXJhY3Rpb25JZDogc3RyaW5nLFxuICAgIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICApID0+IHtcbiAgICBjb25zdCB7IG9yaWdpbiwgbmV0d29ya0lkIH0gPSBtZXRhZGF0YVxuICAgIHN0b3JlLnNldChpbnRlcmFjdGlvbklkLCB7IHRhYklkLCBvcmlnaW4sIG5ldHdvcmtJZCB9KVxuICAgIHJldHVybiBvayh1bmRlZmluZWQpXG4gIH1cblxuICBjb25zdCBnZXRUYWJJZCA9IChpbnRlcmFjdGlvbklkOiBzdHJpbmcpOiBSZXN1bHRBc3luYzxudW1iZXIsIEVycm9yPiA9PiB7XG4gICAgY29uc3QgdmFsdWVzID0gc3RvcmUuZ2V0KGludGVyYWN0aW9uSWQpXG4gICAgcmV0dXJuIHZhbHVlcyA/IG9rQXN5bmModmFsdWVzLnRhYklkKSA6IGVyckFzeW5jKG5ldyBFcnJvcignTm8gdGFiIGZvdW5kJykpXG4gIH1cblxuICBjb25zdCBnZXROZXR3b3JrSWQgPSAoaW50ZXJhY3Rpb25JZDogc3RyaW5nKTogUmVzdWx0QXN5bmM8bnVtYmVyLCBFcnJvcj4gPT4ge1xuICAgIGNvbnN0IHZhbHVlcyA9IHN0b3JlLmdldChpbnRlcmFjdGlvbklkKVxuICAgIHJldHVybiB2YWx1ZXNcbiAgICAgID8gb2tBc3luYyh2YWx1ZXMubmV0d29ya0lkKVxuICAgICAgOiBlcnJBc3luYyhuZXcgRXJyb3IoJ05vIHRhYiBmb3VuZCcpKVxuICB9XG5cbiAgY29uc3QgZ2V0SW50ZXJhY3Rpb25JZHNCeVRhYklkID0gKFxuICAgIHRhYklkOiBudW1iZXIsXG4gICk6IFJlc3VsdEFzeW5jPHN0cmluZ1tdLCBFcnJvcj4gPT4ge1xuICAgIGNvbnN0IGludGVyYWN0aW9uSWRzID0gWy4uLnN0b3JlLmVudHJpZXMoKV1cbiAgICAgIC5maWx0ZXIoKFssIHZhbHVlXSkgPT4gdmFsdWUudGFiSWQgPT09IHRhYklkKVxuICAgICAgLm1hcCgoW2tleV0pID0+IGtleSlcblxuICAgIHJldHVybiBpbnRlcmFjdGlvbklkcy5sZW5ndGhcbiAgICAgID8gb2tBc3luYyhpbnRlcmFjdGlvbklkcylcbiAgICAgIDogZXJyQXN5bmMobmV3IEVycm9yKCdObyBpbnRlcmFjdGlvbklkIGZvdW5kJykpXG4gIH1cblxuICBjb25zdCByZW1vdmVCeVRhYklkID0gKHRhYklkOiBudW1iZXIpID0+XG4gICAgZ2V0SW50ZXJhY3Rpb25JZHNCeVRhYklkKHRhYklkKS5tYXAoKGludGVyYWN0aW9uSWRzKSA9PlxuICAgICAgaW50ZXJhY3Rpb25JZHMuZm9yRWFjaCgoaW50ZXJhY3Rpb25JZCkgPT4gc3RvcmUuZGVsZXRlKGludGVyYWN0aW9uSWQpKSxcbiAgICApXG5cbiAgY29uc3QgZ2V0QW5kUmVtb3ZlQnlUYWJJZCA9ICh0YWJJZDogbnVtYmVyKSA9PlxuICAgIGdldEludGVyYWN0aW9uSWRzQnlUYWJJZCh0YWJJZCkubWFwKChpbnRlcmFjdGlvbklkcykgPT4ge1xuICAgICAgaW50ZXJhY3Rpb25JZHMuZm9yRWFjaCgoaW50ZXJhY3Rpb25JZCkgPT4gc3RvcmUuZGVsZXRlKGludGVyYWN0aW9uSWQpKVxuICAgICAgcmV0dXJuIGludGVyYWN0aW9uSWRzXG4gICAgfSlcblxuICByZXR1cm4ge1xuICAgIGFkZCxcbiAgICBnZXRUYWJJZCxcbiAgICBzdG9yZSxcbiAgICBnZXROZXR3b3JrSWQsXG4gICAgZ2V0SW50ZXJhY3Rpb25JZHNCeVRhYklkLFxuICAgIHJlbW92ZUJ5VGFiSWQsXG4gICAgZ2V0QW5kUmVtb3ZlQnlUYWJJZCxcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlTWVzc2FnZSB9IGZyb20gJ2Nocm9tZS9tZXNzYWdlcy9jcmVhdGUtbWVzc2FnZSdcbmltcG9ydCB7IENvbm5lY3RvckNsaWVudCB9IGZyb20gJ2Nvbm5lY3Rvci9jb25uZWN0b3ItY2xpZW50J1xuaW1wb3J0IHsgTWVzc2FnZXNSb3V0ZXIgfSBmcm9tICdtZXNzYWdlLXJvdXRlcidcbmltcG9ydCB7IFJlc3VsdEFzeW5jLCBlcnJBc3luYywgb2ssIG9rQXN5bmMgfSBmcm9tICduZXZlcnRocm93J1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tICdxdWV1ZXMvcXVldWUnXG5pbXBvcnQgeyBBcHBMb2dnZXIsIGxvZ2dlciBhcyBhcHBMb2dnZXIgfSBmcm9tICd1dGlscy9sb2dnZXInXG5pbXBvcnQge1xuICBNZXNzYWdlLFxuICBtZXNzYWdlRGlzY3JpbWluYXRvcixcbiAgTWVzc2FnZUhhbmRsZXIsXG4gIE1lc3NhZ2VIYW5kbGVyT3V0cHV0LFxuICBTZW5kTWVzc2FnZVdpdGhDb25maXJtYXRpb24sXG59IGZyb20gJy4uL21lc3NhZ2VzL190eXBlcydcbmltcG9ydCB7IExlZGdlclJlc3BvbnNlLCBpc0xlZGdlclJlcXVlc3QgfSBmcm9tICdsZWRnZXIvc2NoZW1hcydcbmltcG9ydCB7IHNlbmRNZXNzYWdlIH0gZnJvbSAnY2hyb21lL2hlbHBlcnMvc2VuZC1tZXNzYWdlJ1xuXG5leHBvcnQgdHlwZSBPZmZzY3JlZW5NZXNzYWdlSGFuZGxlciA9IFJldHVyblR5cGU8dHlwZW9mIE9mZnNjcmVlbk1lc3NhZ2VIYW5kbGVyPlxuZXhwb3J0IGNvbnN0IE9mZnNjcmVlbk1lc3NhZ2VIYW5kbGVyID0gKGlucHV0OiB7XG4gIGNvbm5lY3RvckNsaWVudDogQ29ubmVjdG9yQ2xpZW50XG4gIGRBcHBSZXF1ZXN0UXVldWU6IFF1ZXVlPGFueT5cbiAgbGVkZ2VyVG9XYWxsZXRRdWV1ZTogUXVldWU8TGVkZ2VyUmVzcG9uc2U+XG4gIGluY29taW5nV2FsbGV0TWVzc2FnZVF1ZXVlOiBRdWV1ZTxhbnk+XG4gIG1lc3NhZ2VSb3V0ZXI6IE1lc3NhZ2VzUm91dGVyXG4gIGxvZ2dlcj86IEFwcExvZ2dlclxufSk6IE1lc3NhZ2VIYW5kbGVyID0+IHtcbiAgY29uc3QgY29ubmVjdG9yQ2xpZW50ID0gaW5wdXQuY29ubmVjdG9yQ2xpZW50XG4gIGNvbnN0IGRBcHBSZXF1ZXN0UXVldWUgPSBpbnB1dC5kQXBwUmVxdWVzdFF1ZXVlXG4gIGNvbnN0IGxlZGdlclRvV2FsbGV0UXVldWUgPSBpbnB1dC5sZWRnZXJUb1dhbGxldFF1ZXVlXG4gIGNvbnN0IGluY29taW5nV2FsbGV0TWVzc2FnZVF1ZXVlID0gaW5wdXQuaW5jb21pbmdXYWxsZXRNZXNzYWdlUXVldWVcbiAgY29uc3QgbWVzc2FnZVJvdXRlciA9IGlucHV0Lm1lc3NhZ2VSb3V0ZXJcbiAgY29uc3QgbG9nZ2VyID0gaW5wdXQubG9nZ2VyIHx8IGFwcExvZ2dlclxuXG4gIHJldHVybiAoXG4gICAgbWVzc2FnZTogTWVzc2FnZSxcbiAgICBzZW5kTWVzc2FnZVdpdGhDb25maXJtYXRpb246IFNlbmRNZXNzYWdlV2l0aENvbmZpcm1hdGlvbixcbiAgICB0YWJJZD86IG51bWJlcixcbiAgKTogTWVzc2FnZUhhbmRsZXJPdXRwdXQgPT4ge1xuICAgIHN3aXRjaCAobWVzc2FnZS5kaXNjcmltaW5hdG9yKSB7XG4gICAgICBjYXNlIG1lc3NhZ2VEaXNjcmltaW5hdG9yLndhbGxldE1lc3NhZ2U6IHtcbiAgICAgICAgaWYgKGlzTGVkZ2VyUmVxdWVzdChtZXNzYWdlLmRhdGEpKSB7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgJ/CfqqogLT4g8J+Tkjogd2FsbGV0VG9MZWRnZXJTdWJqZWN0JyxcbiAgICAgICAgICAgIG1lc3NhZ2UuZGF0YS5pbnRlcmFjdGlvbklkLFxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhLmRpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgcmV0dXJuIHNlbmRNZXNzYWdlV2l0aENvbmZpcm1hdGlvbihcbiAgICAgICAgICAgIGNyZWF0ZU1lc3NhZ2Uud2FsbGV0VG9MZWRnZXIoJ29mZlNjcmVlbicsIG1lc3NhZ2UuZGF0YSksXG4gICAgICAgICAgKS5tYXAoKCkgPT4gKHsgc2VuZENvbmZpcm1hdGlvbjogZmFsc2UgfSkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5jb21pbmdXYWxsZXRNZXNzYWdlUXVldWUuYWRkKFxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhLFxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhLmludGVyYWN0aW9uSWQsXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9rQXN5bmMoeyBzZW5kQ29uZmlybWF0aW9uOiBmYWxzZSB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlIG1lc3NhZ2VEaXNjcmltaW5hdG9yLnNldENvbm5lY3Rpb25QYXNzd29yZDoge1xuICAgICAgICBjb25zdCB7IGNvbm5lY3Rpb25QYXNzd29yZCB9ID0gbWVzc2FnZVxuICAgICAgICBpZiAoY29ubmVjdGlvblBhc3N3b3JkKSB7XG4gICAgICAgICAgY29ubmVjdG9yQ2xpZW50LnNldENvbm5lY3Rpb25QYXNzd29yZChcbiAgICAgICAgICAgIEJ1ZmZlci5mcm9tKGNvbm5lY3Rpb25QYXNzd29yZCwgJ2hleCcpLFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25uZWN0b3JDbGllbnQuY29ubmVjdCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29ubmVjdG9yQ2xpZW50LmRpc2Nvbm5lY3QoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBva0FzeW5jKHsgc2VuZENvbmZpcm1hdGlvbjogdHJ1ZSB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlIG1lc3NhZ2VEaXNjcmltaW5hdG9yLmRBcHBSZXF1ZXN0OiB7XG4gICAgICAgIGNvbnN0IHsgaW50ZXJhY3Rpb25JZCwgbWV0YWRhdGEgfSA9IG1lc3NhZ2UuZGF0YVxuICAgICAgICByZXR1cm4gbWVzc2FnZVJvdXRlclxuICAgICAgICAgIC5hZGQodGFiSWQhLCBpbnRlcmFjdGlvbklkLCBtZXRhZGF0YSlcbiAgICAgICAgICAuYXN5bmNBbmRUaGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghaW50ZXJhY3Rpb25JZCkgcmV0dXJuIG9rQXN5bmMobnVsbClcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGE/Lml0ZW1zPy5kaXNjcmltaW5hdG9yID09PSAnY2FuY2VsUmVxdWVzdCcpXG4gICAgICAgICAgICAgIHJldHVybiBkQXBwUmVxdWVzdFF1ZXVlXG4gICAgICAgICAgICAgICAgLmNhbmNlbChpbnRlcmFjdGlvbklkKVxuICAgICAgICAgICAgICAgIC5hbmRUaGVuKCgpID0+XG4gICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZVdpdGhDb25maXJtYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU1lc3NhZ2Uuc2VuZE1lc3NhZ2VFdmVudFRvRGFwcChcbiAgICAgICAgICAgICAgICAgICAgICAnb2ZmU2NyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAncmVxdWVzdENhbmNlbFN1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIHRhYklkLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgIHJldHVybiBkQXBwUmVxdWVzdFF1ZXVlLmFkZChtZXNzYWdlLmRhdGEsIGludGVyYWN0aW9uSWQpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAubWFwKCgpID0+ICh7IHNlbmRDb25maXJtYXRpb246IHRydWUgfSkpXG4gICAgICB9XG5cbiAgICAgIGNhc2UgbWVzc2FnZURpc2NyaW1pbmF0b3Iub2Zmc2NyZWVuTG9nOiB7XG4gICAgICAgIGNvbnN0IGxldmVsID0gbWVzc2FnZS5sb2cuX21ldGEubG9nTGV2ZWxOYW1lLnRvTG93ZXJDYXNlKCkgfHwgJ2RlYnVnJ1xuICAgICAgICBkZWxldGUgbWVzc2FnZS5sb2cuX21ldGFcbiAgICAgICAgOyhsb2dnZXIgYXMgYW55KT8uW2xldmVsXSguLi5PYmplY3QudmFsdWVzKG1lc3NhZ2UubG9nKSlcbiAgICAgICAgcmV0dXJuIG9rQXN5bmMoeyBzZW5kQ29uZmlybWF0aW9uOiBmYWxzZSB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlIG1lc3NhZ2VEaXNjcmltaW5hdG9yLmluY29taW5nV2FsbGV0TWVzc2FnZTpcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VSb3V0ZXJcbiAgICAgICAgICAuZ2V0VGFiSWQobWVzc2FnZS5kYXRhLmludGVyYWN0aW9uSWQpXG4gICAgICAgICAgLm1hcEVycigoKSA9PiAoeyByZWFzb246ICd0YWJJZE5vdEZvdW5kJyB9KSlcbiAgICAgICAgICAuYW5kVGhlbigodGFiSWQpID0+XG4gICAgICAgICAgICBzZW5kTWVzc2FnZVdpdGhDb25maXJtYXRpb24oXG4gICAgICAgICAgICAgIC8vIHRoaXMgaXMgdGFyZ2V0dGVkIHRvIHBhcnRpY3VsYXIgZEFwcFxuICAgICAgICAgICAgICBjcmVhdGVNZXNzYWdlLndhbGxldFJlc3BvbnNlKCdvZmZTY3JlZW4nLCBtZXNzYWdlLmRhdGEpLFxuICAgICAgICAgICAgICB0YWJJZCxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKVxuICAgICAgICAgIC5hbmRUaGVuKCgpID0+IG1lc3NhZ2VSb3V0ZXIuZ2V0TmV0d29ya0lkKG1lc3NhZ2UuZGF0YS5pbnRlcmFjdGlvbklkKSlcbiAgICAgICAgICAubWFwRXJyKCgpID0+ICh7IHJlYXNvbjogJ25ldHdvcmtJZE5vdEZvdW5kJyB9KSlcbiAgICAgICAgICAubWFwKChuZXR3b3JrSWQpID0+XG4gICAgICAgICAgICBzZW5kTWVzc2FnZShcbiAgICAgICAgICAgICAgLy8gdGhpcyBpcyBmb3IgYmFja2dyb3VuZCBzY3JpcHQgdG8gaGFuZGxlIG5vdGlmaWNhdGlvbnNcbiAgICAgICAgICAgICAgY3JlYXRlTWVzc2FnZS53YWxsZXRSZXNwb25zZSgnb2ZmU2NyZWVuJywge1xuICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2UuZGF0YSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgbmV0d29ya0lkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApXG4gICAgICAgICAgLm1hcCgoKSA9PiAoeyBzZW5kQ29uZmlybWF0aW9uOiB0cnVlIH0pKVxuXG4gICAgICBjYXNlIG1lc3NhZ2VEaXNjcmltaW5hdG9yLmxlZGdlclJlc3BvbnNlOlxuICAgICAgICByZXR1cm4gbGVkZ2VyVG9XYWxsZXRRdWV1ZVxuICAgICAgICAgIC5hZGQobWVzc2FnZS5kYXRhLCBtZXNzYWdlLmRhdGEuaW50ZXJhY3Rpb25JZClcbiAgICAgICAgICAubWFwKCgpID0+ICh7IHNlbmRDb25maXJtYXRpb246IGZhbHNlIH0pKVxuXG4gICAgICBjYXNlIG1lc3NhZ2VEaXNjcmltaW5hdG9yLmNsb3NlRGFwcFRhYjoge1xuICAgICAgICBjb25zdCB7IHRhYklkIH0gPSBtZXNzYWdlXG4gICAgICAgIHJldHVybiBtZXNzYWdlUm91dGVyXG4gICAgICAgICAgLmdldEFuZFJlbW92ZUJ5VGFiSWQodGFiSWQpXG4gICAgICAgICAgLm1hcEVycigoKSA9PiAoeyByZWFzb246ICd0YWJJZE5vdEZvdW5kJyB9KSlcbiAgICAgICAgICAubWFwKChpbnRlcmFjdGlvbklkcykgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpbnRlcmFjdGlvbklkIG9mIGludGVyYWN0aW9uSWRzKSB7XG4gICAgICAgICAgICAgIFJlc3VsdEFzeW5jLmNvbWJpbmUoW1xuICAgICAgICAgICAgICAgIGRBcHBSZXF1ZXN0UXVldWUuY2FuY2VsKGludGVyYWN0aW9uSWQpLFxuICAgICAgICAgICAgICAgIGluY29taW5nV2FsbGV0TWVzc2FnZVF1ZXVlLmNhbmNlbChpbnRlcmFjdGlvbklkKSxcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5tYXAoKCkgPT4gKHsgc2VuZENvbmZpcm1hdGlvbjogZmFsc2UgfSkpXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBlcnJBc3luYyh7XG4gICAgICAgICAgcmVhc29uOiAndW5oYW5kbGVkTWVzc2FnZURpc2NyaW1pbmF0b3InLFxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnY29uZmlnJ1xuaW1wb3J0IHsgQ29ubmVjdG9yQ2xpZW50IH0gZnJvbSAnY29ubmVjdG9yL2Nvbm5lY3Rvci1jbGllbnQnXG5pbXBvcnQgeyBMZWRnZXJSZXNwb25zZSB9IGZyb20gJ2xlZGdlci9zY2hlbWFzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAndXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tICdxdWV1ZXMvcXVldWUnXG5pbXBvcnQgeyBXb3JrZXIgfSBmcm9tICdxdWV1ZXMvd29ya2VyJ1xuaW1wb3J0IHsgTWVzc2FnZXNSb3V0ZXIgfSBmcm9tICdtZXNzYWdlLXJvdXRlcidcbmltcG9ydCB7IGNyZWF0ZU1lc3NhZ2UgfSBmcm9tICdjaHJvbWUvbWVzc2FnZXMvY3JlYXRlLW1lc3NhZ2UnXG5pbXBvcnQgeyBPZmZzY3JlZW5NZXNzYWdlSGFuZGxlciB9IGZyb20gJ2Nocm9tZS9vZmZzY3JlZW4vbWVzc2FnZS1oYW5kbGVyJ1xuaW1wb3J0IHsgTWVzc2FnZUNsaWVudCB9IGZyb20gJ2Nocm9tZS9tZXNzYWdlcy9tZXNzYWdlLWNsaWVudCdcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdjaHJvbWUvbWVzc2FnZXMvX3R5cGVzJ1xuaW1wb3J0IHsgZmlsdGVyLCBzd2l0Y2hNYXAsIHRpbWVyLCB3aXRoTGF0ZXN0RnJvbSB9IGZyb20gJ3J4anMnXG5cbmNvbnN0IG1lc3NhZ2VSb3V0ZXIgPSBNZXNzYWdlc1JvdXRlcih7IGxvZ2dlciB9KVxuXG5jb25zdCBjb25uZWN0b3JDbGllbnQgPSBDb25uZWN0b3JDbGllbnQoe1xuICBzb3VyY2U6ICdleHRlbnNpb24nLFxuICB0YXJnZXQ6ICd3YWxsZXQnLFxuICBzaWduYWxpbmdTZXJ2ZXJCYXNlVXJsOiBjb25maWcuc2lnbmFsaW5nU2VydmVyLmJhc2VVcmwsXG4gIGlzSW5pdGlhdG9yOiB0cnVlLFxuICBsb2dnZXIsXG59KVxuXG5jb25uZWN0b3JDbGllbnQuY29ubmVjdCgpXG5cbmNvbnN0IGRBcHBSZXF1ZXN0UXVldWUgPSBRdWV1ZTxhbnk+KHtcbiAga2V5OiAnZEFwcFJlcXVlc3RRdWV1ZScsXG4gIGxvZ2dlcixcbiAgcGF1c2VkOiB0cnVlLFxuICB3b3JrZXI6IFdvcmtlcigoam9iKSA9PlxuICAgIGNvbm5lY3RvckNsaWVudFxuICAgICAgLnNlbmRNZXNzYWdlKGpvYi5kYXRhLCB7IHRpbWVvdXQ6IGNvbmZpZy53ZWJSVEMuY29uZmlybWF0aW9uVGltZW91dCB9KVxuICAgICAgLm1hcCgoKSA9PlxuICAgICAgICBtZXNzYWdlUm91dGVyXG4gICAgICAgICAgLmdldFRhYklkKGpvYi5kYXRhLmludGVyYWN0aW9uSWQpXG4gICAgICAgICAgLmFuZFRoZW4oKHRhYklkKSA9PlxuICAgICAgICAgICAgbWVzc2FnZUNsaWVudC5zZW5kTWVzc2FnZUFuZFdhaXRGb3JDb25maXJtYXRpb24oXG4gICAgICAgICAgICAgIGNyZWF0ZU1lc3NhZ2Uuc2VuZE1lc3NhZ2VFdmVudFRvRGFwcChcbiAgICAgICAgICAgICAgICAnb2ZmU2NyZWVuJyxcbiAgICAgICAgICAgICAgICAncmVjZWl2ZWRCeVdhbGxldCcsXG4gICAgICAgICAgICAgICAgam9iLmRhdGEuaW50ZXJhY3Rpb25JZCxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgdGFiSWQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICksXG4gICAgICApXG4gICAgICAubWFwRXJyKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zdCByZXRyeUlmTm90Q29ubmVjdGVkID0gZXJyb3IucmVhc29uID09PSAnbm90Q29ubmVjdGVkJ1xuICAgICAgICBjb25zdCByZXRyeUlmTWVzc2FnZUZhaWxlZCA9IGpvYi5udW1iZXJPZlJldHJpZXMgPCAzXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5lcnJvcixcbiAgICAgICAgICBzaG91bGRSZXRyeTogcmV0cnlJZk5vdENvbm5lY3RlZCB8fCByZXRyeUlmTWVzc2FnZUZhaWxlZCxcbiAgICAgICAgfVxuICAgICAgfSksXG4gICksXG59KVxuXG5jb25zdCBsZWRnZXJUb1dhbGxldFF1ZXVlID0gUXVldWU8TGVkZ2VyUmVzcG9uc2U+KHtcbiAga2V5OiAnbGVkZ2VyVG9XYWxsZXQnLFxuICBsb2dnZXIsXG4gIHdvcmtlcjogV29ya2VyKChqb2IpID0+XG4gICAgY29ubmVjdG9yQ2xpZW50LnNlbmRNZXNzYWdlKGpvYi5kYXRhLCB7XG4gICAgICB0aW1lb3V0OiBjb25maWcud2ViUlRDLmNvbmZpcm1hdGlvblRpbWVvdXQsXG4gICAgfSksXG4gICksXG59KVxuXG5jb25zdCBpbmNvbWluZ1dhbGxldE1lc3NhZ2VRdWV1ZSA9IFF1ZXVlPFJlY29yZDxzdHJpbmcsIGFueT4+KHtcbiAga2V5OiAnaW5jb21pbmdXYWxsZXRNZXNzYWdlUXVldWUnLFxuICBsb2dnZXIsXG4gIHBhdXNlZDogZmFsc2UsXG4gIHdvcmtlcjogV29ya2VyKChqb2IpID0+XG4gICAgbWVzc2FnZUNsaWVudFxuICAgICAgLmhhbmRsZU1lc3NhZ2UoY3JlYXRlTWVzc2FnZS5pbmNvbWluZ1dhbGxldE1lc3NhZ2UoJ3dhbGxldCcsIGpvYi5kYXRhKSlcbiAgICAgIC5tYXBFcnIoKGVycikgPT4gKHtcbiAgICAgICAgLi4uZXJyLFxuICAgICAgICBzaG91bGRSZXRyeTogZmFsc2UsXG4gICAgICB9KSksXG4gICksXG59KVxuXG5jb25uZWN0b3JDbGllbnQuY29ubmVjdGVkJC5zdWJzY3JpYmUoKGNvbm5lY3RlZCkgPT4ge1xuICBpZiAoY29ubmVjdGVkKSB7XG4gICAgbGVkZ2VyVG9XYWxsZXRRdWV1ZS5zdGFydCgpXG4gICAgZEFwcFJlcXVlc3RRdWV1ZS5zdGFydCgpXG4gIH0gZWxzZSB7XG4gICAgbGVkZ2VyVG9XYWxsZXRRdWV1ZS5zdG9wKClcbiAgICBkQXBwUmVxdWVzdFF1ZXVlLnN0b3AoKVxuICB9XG59KVxuXG5jb25zdCBtZXNzYWdlQ2xpZW50ID0gTWVzc2FnZUNsaWVudChcbiAgT2Zmc2NyZWVuTWVzc2FnZUhhbmRsZXIoe1xuICAgIGNvbm5lY3RvckNsaWVudCxcbiAgICBkQXBwUmVxdWVzdFF1ZXVlLFxuICAgIGxlZGdlclRvV2FsbGV0UXVldWUsXG4gICAgaW5jb21pbmdXYWxsZXRNZXNzYWdlUXVldWUsXG4gICAgbWVzc2FnZVJvdXRlcixcbiAgICBsb2dnZXIsXG4gIH0pLFxuICAnb2ZmU2NyZWVuJyxcbiAgeyBsb2dnZXIgfSxcbilcblxuY29ubmVjdG9yQ2xpZW50Lm9uTWVzc2FnZSQuc3Vic2NyaWJlKChtZXNzYWdlKSA9PiB7XG4gIG1lc3NhZ2VDbGllbnQub25NZXNzYWdlKGNyZWF0ZU1lc3NhZ2Uud2FsbGV0TWVzc2FnZSgnd2FsbGV0JywgbWVzc2FnZSkpXG59KVxuXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1lc3NhZ2U6IE1lc3NhZ2UsIHNlbmRlcikgPT4ge1xuICBtZXNzYWdlQ2xpZW50Lm9uTWVzc2FnZShtZXNzYWdlLCBzZW5kZXIudGFiPy5pZClcbn0pXG5cbmNvbnN0IFRXT19NSU5VVEVTID0gMTIwXzAwMFxuY29uc3QgZXZlcnlUd29NaW51dGUkID0gdGltZXIoMCwgVFdPX01JTlVURVMpXG5cbmV2ZXJ5VHdvTWludXRlJFxuICAucGlwZShcbiAgICB3aXRoTGF0ZXN0RnJvbShjb25uZWN0b3JDbGllbnQuY29ubmVjdGVkJCwgY29ubmVjdG9yQ2xpZW50LnNob3VsZENvbm5lY3QkKSxcbiAgICBmaWx0ZXIoKFssIGNvbm5lY3RlZCwgc2hvdWxkQ29ubmVjdF0pID0+ICFjb25uZWN0ZWQgJiYgc2hvdWxkQ29ubmVjdCksXG4gICAgc3dpdGNoTWFwKCgpID0+XG4gICAgICBtZXNzYWdlQ2xpZW50XG4gICAgICAgIC5zZW5kTWVzc2FnZUFuZFdhaXRGb3JDb25maXJtYXRpb248eyBjb25uZWN0aW9uUGFzc3dvcmQ6IHN0cmluZyB9PihcbiAgICAgICAgICBjcmVhdGVNZXNzYWdlLmdldENvbm5lY3Rpb25QYXNzd29yZCgnb2ZmU2NyZWVuJyksXG4gICAgICAgIClcbiAgICAgICAgLm1hcCgoeyBjb25uZWN0aW9uUGFzc3dvcmQgfSkgPT4gY29ubmVjdGlvblBhc3N3b3JkKVxuICAgICAgICAuYW5kVGhlbigoY29ubmVjdGlvblBhc3N3b3JkKSA9PlxuICAgICAgICAgIG1lc3NhZ2VDbGllbnQuaGFuZGxlTWVzc2FnZShcbiAgICAgICAgICAgIGNyZWF0ZU1lc3NhZ2Uuc2V0Q29ubmVjdGlvblBhc3N3b3JkKFxuICAgICAgICAgICAgICAnb2ZmU2NyZWVuJyxcbiAgICAgICAgICAgICAgY29ubmVjdGlvblBhc3N3b3JkLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICksXG4gIClcbiAgLnN1YnNjcmliZSgpXG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtZGVmaW5pdGlvbnNcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgcmFkaXg6IHtcbiAgICAgIG1lc3NhZ2VSb3V0ZXI6IE1lc3NhZ2VzUm91dGVyXG4gICAgICBtZXNzYWdlQ2xpZW50OiBNZXNzYWdlQ2xpZW50XG4gICAgfVxuICB9XG59XG5cbndpbmRvdy5yYWRpeCA9IHtcbiAgbWVzc2FnZUNsaWVudCxcbiAgbWVzc2FnZVJvdXRlcixcbn1cbiJdLCJuYW1lcyI6WyJqb2JTdGF0dXMiLCJxdWV1ZUludGVyYWN0aW9ucyIsInF1ZXVlSW50ZXJhY3Rpb25FcnJvclR5cGUiLCJRdWV1ZVN1YmplY3RzIiwiUmVwbGF5U3ViamVjdCIsIlN1YmplY3QiLCJJbk1lbW9yeVN0b3JhZ2UiLCJzdG9yZSIsImdldERhdGEiLCJrZXkiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGF0YSIsImVycm9yIiwic2V0RGF0YSIsIlJlc3VsdEFzeW5jIiwicGFyc2VKU09OIiwib2siLCJRdWV1ZSIsInN0b3JhZ2UiLCJ3b3JrZXIiLCJsb2dnZXIiLCJzdWJqZWN0cyIsInBhdXNlZCIsInN1YnNjcmlwdGlvbnMiLCJTdWJzY3JpcHRpb24iLCJkZWNvZGVTdGF0ZURhdGEiLCJ0cmFuc2Zvcm1TdGF0ZSIsImFjYyIsImlkIiwiaXRlbSIsImRlZmF1bHRTdGF0ZSIsImdldFN0YXRlIiwic2F2ZVN0YXRlIiwic3RhdGUiLCJhZGRKb2JUb1BlbmRpbmdRdWV1ZSIsImpvYiIsIm9rQXN5bmMiLCJ1cGRhdGVKb2JTdGF0dXNRdWV1ZUludGVyYWN0aW9uIiwic3RhdHVzIiwibnVtYmVyT2ZSZXRyaWVzIiwiam9iSWQiLCJ1cGRhdGVkSm9iIiwicmVtb3ZlSm9iUXVldWVJbnRlcmFjdGlvbiIsInVwZGF0ZVN0YXRlIiwiaW50ZXJhY3Rpb24iLCJnZXRKb2JCeUlkIiwiZXJyQXN5bmMiLCJjaGVja0lmSm9iRXhpc3RzIiwiYWRkSm9iIiwiZXhpc3RzIiwiYWRkUXVldWVJbnRlcmFjdGlvbkFuZFdhaXRGb3JTdGF0ZVVwZGF0ZSIsImVyciIsIndhaXRGb3JTdGF0ZVVwZGF0ZSQiLCJmaWx0ZXIiLCJyZXN1bHQiLCJkaXNwYXRjaFN0YXRlVXBkYXRlJCIsIm9mIiwidGFwIiwidiIsImZpcnN0VmFsdWVGcm9tIiwibWVyZ2UiLCJjb25jYXRNYXAiLCJnZXROZXh0UGVuZGluZ0pvYiIsInVwZGF0ZUpvYlN0YXR1cyIsImludGVyYWN0aW9uSWQiLCJyZXRyeUpvYiIsInJlbW92ZUpvYiIsInByb2Nlc3NOZXh0Sm9iIiwic2hvdWxkUmV0cnkiLCJvblN0YXRlQ2hhbmdlJCIsInNob3VsZFByb2Nlc3NKb2JzJCIsImlzUGF1c2VkIiwid2l0aExhdGVzdEZyb20iLCJzd2l0Y2hNYXAiLCJXb3JrZXIiLCJmbiIsIk1lc3NhZ2VzUm91dGVyIiwiYWRkIiwidGFiSWQiLCJtZXRhZGF0YSIsIm9yaWdpbiIsIm5ldHdvcmtJZCIsImdldFRhYklkIiwidmFsdWVzIiwiZ2V0TmV0d29ya0lkIiwiZ2V0SW50ZXJhY3Rpb25JZHNCeVRhYklkIiwiaW50ZXJhY3Rpb25JZHMiLCJ2YWx1ZSIsIk9mZnNjcmVlbk1lc3NhZ2VIYW5kbGVyIiwiaW5wdXQiLCJjb25uZWN0b3JDbGllbnQiLCJkQXBwUmVxdWVzdFF1ZXVlIiwibGVkZ2VyVG9XYWxsZXRRdWV1ZSIsImluY29taW5nV2FsbGV0TWVzc2FnZVF1ZXVlIiwibWVzc2FnZVJvdXRlciIsImFwcExvZ2dlciIsIm1lc3NhZ2UiLCJzZW5kTWVzc2FnZVdpdGhDb25maXJtYXRpb24iLCJtZXNzYWdlRGlzY3JpbWluYXRvciIsImlzTGVkZ2VyUmVxdWVzdCIsImNyZWF0ZU1lc3NhZ2UiLCJjb25uZWN0aW9uUGFzc3dvcmQiLCJfYiIsIl9hIiwibGV2ZWwiLCJzZW5kTWVzc2FnZSIsIkNvbm5lY3RvckNsaWVudCIsImNvbmZpZyIsIm1lc3NhZ2VDbGllbnQiLCJyZXRyeUlmTm90Q29ubmVjdGVkIiwicmV0cnlJZk1lc3NhZ2VGYWlsZWQiLCJjb25uZWN0ZWQiLCJNZXNzYWdlQ2xpZW50Iiwic2VuZGVyIiwiVFdPX01JTlVURVMiLCJldmVyeVR3b01pbnV0ZSQiLCJ0aW1lciIsInNob3VsZENvbm5lY3QiXSwibWFwcGluZ3MiOiJxbEJBT08sTUFBTUEsRUFBWSxDQUN2QixRQUFTLFVBQ1QsV0FBWSxhQUNaLFVBQVcsWUFDWCxPQUFRLFFBQ1YsRUF3QmFDLEVBQW9CLENBQy9CLE9BQVEsU0FDUixVQUFXLFlBQ1gsZ0JBQWlCLGtCQUNqQixTQUFVLFdBQ1YsVUFBVyxXQUNiLEVBSWFDLEVBQTRCLENBQ3ZDLHdCQUF5QiwwQkFDekIsZUFBZ0IsaUJBQ2hCLGNBQWUsZ0JBQ2YsbUJBQW9CLHFCQUNwQixxQkFBc0IsdUJBQ3RCLHNCQUF1Qix3QkFDdkIsaUJBQWtCLG1CQUNsQix1QkFBd0Isd0JBQzFCLEVDakRhQyxHQUFnQixLQUFVLENBQ3JDLE9BQVEsSUFBSUMsR0FBdUIsQ0FBQyxFQUNwQyxpQkFBa0IsSUFBSUMsRUFDdEIsdUJBQXdCLElBQUlBLEVBUzVCLGVBQWdCLElBQUlBLENBQ3RCLEdD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
